{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/mixin.js","webpack:///./src/pages/cart/cart.js"],"names":["url","hotLists","banner","topLists","subLists","rank","searchList","details","deal","addCart","cartRemove","cartMremove","cartReduce","cartLists","cartUpdate","addressList","addressAdd","addressRemove","addressUpdata","addressSetDefault","key","hasOwnProperty","__webpack_exports__","filters","currency","price","priceStr","indexOf","arr","split","substr","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_base_css__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_3_vue___default","__WEBPACK_IMPORTED_MODULE_4_axios__","__WEBPACK_IMPORTED_MODULE_4_axios___default","__WEBPACK_IMPORTED_MODULE_5_js_api_js__","__WEBPACK_IMPORTED_MODULE_6_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_7_qs__","__WEBPACK_IMPORTED_MODULE_8_velocity_animate__","__WEBPACK_IMPORTED_MODULE_8_velocity_animate___default","a","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectedList","push","number","removeList","created","getList","methods","checkOut","alert","_this","post","then","res","cartList","editing","editingMsg","selectGoods","attr","selectShop","selectAll","edit","index","item","i","reduce","id","add","remove","goodIndex","removeConfirm","_this2","_removeData","splice","removeShop","start","e","startX","changedTouches","clientX","end","endX","left","$refs","mixins"],"mappings":"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","file":"static/js/cart.7dee025f170b693f8645.js","sourcesContent":["let url = {\r\n  hotLists: '/index/hotLists',\r\n  banner: '/index/banner',\r\n  topLists:'/category/topList',\r\n  subLists:'/category/subList',\r\n  rank:'/category/rank',\r\n  searchList:'/search/list',\r\n  details:'/goods/details',\r\n  deal:'/goods/deal',\r\n  addCart:'/cart/add',\r\n  cartRemove: '/cart/remove',\r\n  cartMremove: '/cart/mremove',\r\n  cartReduce: '/cart/reduce',\r\n  cartLists: '/cart/list',\r\n  cartUpdate: '/cart/update',\r\n  addressList:'/address/list',\r\n  addressAdd:'/address/add',\r\n  addressRemove:'/address/remove',\r\n  addressUpdata:'/address/updata',\r\n  addressSetDefault:'/address/setDefault',\r\n}\r\n\r\n//let host = 'http://rapapi.org/mockjsdata/23334'\r\nlet host = 'http://rap2api.taobao.org/app/mock/7058'\r\n\r\nfor (let key in url) {\r\n  if (url.hasOwnProperty(key)) {\r\n    url[key] = host + url[key]\r\n  }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","let mixin = {\r\n  filters: {\r\n    currency(price) {\r\n      let priceStr = '' + price\r\n      if (priceStr.indexOf('.') > -1) {\r\n        let arr = priceStr.split('.')\r\n        return arr[0] + '.' + (arr[1] + '0').substr(0, 2)\r\n      } else {\r\n        return priceStr + '.00'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import \"./cart_base.css\"\r\nimport \"./cart_trade.css\"\r\nimport \"./cart.css\"\r\n\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport mixin from 'js/mixin.js'\r\nimport qs from 'qs'\r\nimport Volecity from 'velocity-animate'\r\n//import Swipe from 'components/Swipe.vue'\r\n\r\n\r\nnew Vue({\r\n\tel:'.container',\r\n\tdata: {\r\n      lists:null,\r\n      total:0,\r\n      editingShop:null,\r\n      editingShopIndex:-1,\r\n      removePopup:false,\r\n      removeData:null,\r\n      removeMsg:''\r\n\t},\r\n\tcomputed: {\r\n     allSelected:{\r\n         get(){\r\n         \tif(this.lists &&this.lists.length){\r\n               return this.lists.every(shop=>{\r\n               \t//shop.goodsList.forEach()\r\n               \treturn shop.checked\r\n               })\r\n         \t}\r\n         \treturn false\r\n         },\r\n         set(newVal){\r\n       this.lists.forEach(shop=>{\r\n       \tshop.checked = newVal\r\n       \tshop.goodsList.forEach(good=>{\r\n       \t\tgood.checked = newVal\r\n       \t})\r\n       })\r\n         }\r\n     },\r\n     allRemoveSelected:{\r\n     \tget(){\r\n           if(this.editingShop){\r\n           \treturn this.editingShop.removeChecked\r\n           }\r\n           return false\r\n     \t},\r\n     \tset(newVal){\r\n            if(this.editingShop){\r\n            \tthis.editingShop.removeChecked = newVal\r\n            \tthis.editingShop.goodsList.forEach(good=>{\r\n            \t\tgood.removeChecked = newVal\r\n            \t})\r\n            }\r\n     \t}\r\n     },\r\n     selectedList(){\r\n          if(this.lists &&this.lists.length){\r\n          \tlet arr = []\r\n          \tlet total = 0\r\n            this.lists.forEach(shop=>{\r\n              shop.goodsList.forEach(good=>{\r\n       \t\t   if(good.checked){\r\n       \t\t   \tarr.push(good)\r\n       \t\t   \ttotal += good.price * good.number\r\n       \t\t   }\r\n       \t      })\r\n            })\r\n            this.total =total\r\n            return arr\r\n          }\r\n          return []\r\n     },\r\n     removeList(){\r\n          if(this.editingShop){\r\n          \tlet arr = []\r\n          \tthis.editingShop.goodsList.forEach(good=>{\r\n          \t\tif(good.removeChecked){\r\n          \t\t\tarr.push(good)\r\n          \t\t}\r\n          \t})\r\n          \treturn arr\r\n          }\r\n          return []\r\n     }\r\n\t},\r\n\tcreated(){\r\n      this.getList()\r\n\t},\r\n\tmethods: {\r\n    checkOut(){\r\n         alert('您需要支付￥'+this.total+'元！')\r\n    },\r\n       getList(){\r\n       \t  axios.post(url.cartLists).then(res =>{\r\n       \t  \t//console.log(res)\r\n       \tlet lists = res.data.cartList\r\n       \t lists.forEach(shop => {\r\n       \t \tshop.checked = true\r\n       \t \tshop.editing = false\r\n       \t \tshop.editingMsg = '编辑'\r\n       \t \tshop.removeChecked = false\r\n       \t  shop.goodsList.forEach(good=>{\r\n       \t  \tgood.checked = true\r\n       \t  \tgood.removeChecked = false\r\n       \t  })\r\n        })\r\n       \t this.lists = lists\r\n      })\r\n      },\r\n      selectGoods(shop,good){\r\n      \tlet attr = this.editingShop?'removeChecked':'checked'\r\n      \tgood[attr] = !good[attr]\r\n      \tshop[attr] =shop.goodsList.every( good=>{\r\n      \t\treturn good[attr]\r\n      \t})\r\n      \t//console.log(good.checked)\r\n      },\r\n      selectShop(shop){\r\n      \tlet attr = this.editingShop?'removeChecked':'checked'\r\n      \t//shop.checked = !shop.checked\r\n      \tshop[attr] = !shop[attr]\r\n      \tshop.goodsList.forEach(good=>{\r\n      \t\tgood[attr] =shop[attr]\r\n      \t})\r\n      },\r\n      selectAll(){\r\n      \tlet attr = this.editingShop?'allRemoveSelected':'allSelected'\r\n      \tthis[attr] = !this[attr]\r\n      },\r\n      edit(shop,index){\r\n      \tshop.editing = !shop.editing\r\n      \tshop.editingMsg = shop.editing ? '编辑':'完成'\r\n      \tthis.lists.forEach((item,i)=>{\r\n      \t\tif(index !== i){\r\n      \t\t\titem.editing = false\r\n      \t\t\titem.editingMsg = shop.editing ? '':'编辑'\r\n      \t\t}\r\n      \t})\r\n      \tthis.editingShop = shop.editing ? shop : null\r\n         this.editingShopIndex = shop.editing ? index : -1\r\n      },\r\n      reduce(good){\r\n           if(good.number===1) return\r\n      \taxios.post(url.cartReduce,{\r\n      \t\tid:good.id,\r\n      \t\tnumber:1\r\n      \t}).then(res=>{\r\n      \t\tgood.number--\r\n      \t})\r\n      },\r\n      add(good){\r\n      \taxios.post(url.addCart,{\r\n      \t\tid:good.id,\r\n      \t\tnumber:1\r\n      \t}).then(res=>{\r\n      \t\tgood.number++\r\n      \t})\r\n      },\r\n     remove(shop,index,good,goodIndex){\r\n     \t//console.log('ff')\r\n             this.removePopup = true\r\n             this.removeMsg = '确认删除该商品吗？'\r\n             this.removeData={shop,index,good,goodIndex}\r\n     },\r\n     removeConfirm(){\r\n     \tlet {shop,index,good,goodIndex} = this.removeData\r\n     \t axios.post(url.cartRemove,{\r\n     \t \tid:good.id\r\n     \t }).then(res=>{\r\n     \t \tshop.goodsList.splice(goodIndex,1)\r\n     \t \tif(!shop.goodsList.length){\r\n     \t \t\tthis.lists.splice(index,1)\r\n     \t \t\tthis.removeShop()\r\n     \t \t}\r\n     \t \tthis.removePopup = false\r\n     \t \t//this.$refs[`goods-${index}-${goodIndex}`][0].style.left = '0px'\r\n     \t })\r\n     },\r\n     removeShop(){\r\n     \tthis.editingShop = null\r\n     \tthis.editingShopIndex = -1\r\n     \tthis.lists.forEach(shop=>{\r\n     \t\tshop.editing = false\r\n     \t\tshop.editingMsg = '编辑'\r\n     \t})\r\n     },\r\n         start(e,good) {\r\n      good.startX = e.changedTouches[0].clientX\r\n    },\r\n    end(e,index,good,goodIndex) {\r\n      let endX = e.changedTouches[0].clientX\r\n      let left = '0'\r\n      if(good.startX - endX > 100) {\r\n        left = '-60px'\r\n      }\r\n      if(endX - good.startX > 100) {\r\n        left = '0px'\r\n      }\r\n      // console.log(this.$refs[`goods-${shopIndex}-${goodIndex}`])\r\n      Volecity(this.$refs[`goods-${index}-${goodIndex}`], {\r\n        left\r\n      })\r\n    }\r\n\t},\r\n\tmixins: [mixin]\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}